#!/usr/bin/env python
# find a file named "activate" in a subdir or parentdir of the cwd
# written by karim hamidou. 03/12/13

import sys
import os

def visit_dir(visited_dirs=[], filename="activate"):
    found = False
    initial_dir = os.getcwd()

    for root, dirs, files in os.walk(os.getcwd(), topdown=True):
        dirs.sort()
        # exclude already visited directories
        for vdir in visited_dirs:
            if vdir in dirs:
                dirs.remove(vdir)

        if filename in files:
            found = True
            break
    if found:
        print "%s/%s" % (root, filename)
        sys.exit(0)
    else:
        if os.getcwd() != "/":
            os.chdir("..")
            visited_dirs.append(initial_dir)
            visit_dir(visited_dirs=visited_dirs)
        else:
            sys.exit(-1)

if len(sys.argv) != 1:
    visit_dir(filename=sys.argv[1])
else:
    visit_dir()
